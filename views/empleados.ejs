<!DOCTYPE html>
<html lang="en">
  <%- include('header.ejs') -%>
  <body>
    <style>
      body {
        background-color: #f5f5f5;
      }
    </style>

    <%- include('navbar.ejs') -%>

    <h1 class="m-2">Lista de empleados</h1>
    <a class="btn btn-primary m-2" href="/empleados/registrar">Registrar empleado</a>
    <div style="padding: 10px; background-color: #252525; margin: 10px;border-radius:5px; width: 75%;">
      <table class="table table-ligth table-striped w-100">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">NOMBRE EMPLEADO</th>
            <th scope="col">NACIONALIDAD</th>
            <th scope="col">CARGO</th>
            <th scope="col">EDITAR</th>
            <th scope="col">ELIMINAR</th>
          </tr>
        </thead>
        <tbody class="bg-ligth">
          <% empleados.forEach(empleado => { %>
          <tr>
            <th scope="row"><%= empleado.idEmpleado %></th>
            <td><%= empleado.nombre_empleado %></td>
            <td><%= empleado.nacionalidad %></td>
            <td><%= empleado.nombre_cargo%></td>
            <td>
              <a href="/empleados/actualizar/<%= empleado.idEmpleado %>" class="btn btn-warning">Editar</a>
            </td>
            <td>
              <a onclick="confirmar(<%= empleado.idEmpleado %>)" type="button" class="btn btn-danger">Eliminar</a>
            </td>
          </tr>
          <% }); %>
        </tbody>
      </table>
    </div>

    <script>
        function confirmar(idEmpleado) {
            Swal.fire({
                title: "Estas seguro?",
                text: "No podrÃ¡s revertirlo!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Si, borralo!",
                cancelButtonText: "Cancelar",
            }).then((result) => {
                if (result.isConfirmed) {
                window.location = '/empleados/borrar/' + idEmpleado;
                }
            });
        }
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"
    ></script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </body>
</html>
